<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <body>

        <th:block th:fragment="pageHeader(config, minimalUI)">
            <h1 class="overall-title" onclick="window.location.href='upload'" th:text="${config.uploadTitle}" th:if="${!minimalUI && config.htmlBanner == ''}">Validator</h1>
            <div class="view-section-input" th:if="${!minimalUI && config.htmlBanner != ''}">
                <div th:utext="${config.htmlBanner}">Validator</div>
            </div>
            <div class="alert alert-danger" th:if="${message}" th:text="${message}">A message</div>
        </th:block>

        <div th:fragment="formHeader(config, minimalUI)" class="panel-heading panel-heading-ui" th:if="${minimalUI}">
            <h1 class="panel-title col-xs-5 minimal-title panel-title-ui">Validation input</h1>
            <div th:align="right">
                <button type="submit" id="inputFileSubmitMinimal" class="btn btn-default" disabled="true" onclick="uploadFile()" th:text="${config.label.uploadButton}">Upload</button>
                <input type="hidden" id="validationTypeToUse" name="validationType"/>
            </div>
        </div>

        <div th:fragment="mainFormInput(config)" class="form-group">
            <label for="fileToValidate" class="col-sm-2 control-label" th:text="${config.label.fileInputLabel}">File to validate</label>
            <div class="col-sm-10">
                <div class="row">
                    <div class="col-sm-2">
                        <select class="form-control" id="contentType" name="contentType" onchange="contentTypeChanged()">
                            <option th:text="${config.label.optionContentFile}" value="fileType">Type</option>
                            <option th:text="${config.label.optionContentURI}" value="uriType">Type</option>
                            <option th:text="${config.label.optionContentDirectInput}" value="stringType">Type</option>
                        </select>
                    </div>
                    <div class="col-sm-10">
                        <div class="row">
                            <div class="col-sm-12" id="fileToValidate">
                                <div class='input-group'>
                                    <div class="input-group-btn">
                                        <button class="btn btn-default" type="button" onclick="triggerFileUpload()"><i class="far fa-folder-open"></i></button>
                                    </div>
                                    <input type="text" id="inputFileName" class="form-control" th:placeholder="${config.label.fileInputPlaceholder}" onclick="triggerFileUpload()" readonly="readonly"/>
                                </div>
                            </div>
                            <input type="file" class="inputFile" id="inputFile" name="file" onchange="fileInputChanged()"/>
                            <div class="col-sm-12 hidden" id="uriToValidate">
                                <input type="url" class="form-control" id="uri" name="uri" onchange="fileInputChanged()">
                            </div>
                            <div class="col-sm-12 hidden" id="stringToValidate">
                                <textarea id="text-editor" name="text-editor" class="form-control" onchange="fileInputChanged()"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div th:fragment="mainFormValidationType(config)" class="form-group" th:if="${config.hasMultipleValidationTypes()}">
            <label for="validationType" class="col-sm-2 control-label" th:text="${config.label.typeLabel}">Validate as</label>
            <div th:class="${config.hasValidationTypeOptions()}? col-sm-5 : col-sm-10">
                <select class="form-control" id="validationType" onchange="validationTypeChanged()" name="validationTypeInternal">
                    <option value="" selected="true" disabled="true"></option>
                    <option th:each="type : ${config.declaredType}" th:text="${config.typeLabel.get(type)}" th:attr="value=${type}">Type</option>
                </select>
            </div>
            <div id="validationTypeOptionDiv" th:if="${config.hasValidationTypeOptions()}" class="col-sm-5 hidden">
                <div id="validationTypeOptionLabelDiv" style="float:left; width:auto; padding-right:30px;">
                    <label for="validationTypeOption" class="control-label" th:text="${config.label.optionLabel}">Option</label>
                </div>
                <div id="validationTypeOptionSelectDiv" style="overflow:hidden; width:auto;">
                    <select class="form-control" id="validationTypeOption" onchange="validationTypeOptionChanged()" name="validationTypeOptionInternal">
                    </select>
                </div>
            </div>
        </div>

        <th:block th:fragment="mainForm(config)">
            <div th:replace="fragments/input :: mainFormInput(${config})"/>
            <div th:replace="fragments/input :: mainFormValidationType(${config})"/>
        </th:block>

        <div th:fragment="externalArtifactCheck(checkLabel, checkTooltip)" class="form-group includeExternalArtefacts hidden">
            <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" id="externalArtefactsCheck" name="addExternalArtefacts" onclick="toggleExternalArtefacts()"> <span th:text="${checkLabel}">Include external artefacts</span>
                    </label>
                    <span data-toggle="tooltip" data-container="body" data-placement="right" th:attr="title=${checkTooltip}"><i class="far fa-question-circle"></i></span>
                </div>
            </div>
        </div>

        <div th:fragment="externalArtifactControl(artifactType, artifactLabel)" class="form-group" th:classappend="'externalClass_'+${artifactType}">
            <label th:attr="for=${'externalAddButton_'+artifactType}" class="col-sm-2 control-label" th:text="${artifactLabel}">Artifact</label>
            <div class="col-sm-10" th:id="'externalDiv_'+${artifactType}">
                <button th:id="'externalAddButton_'+${artifactType}" class="btn btn-default" type="button" th:attr="onclick=|addExternal('${artifactType}')|"><i class="fas fa-plus"></i></button>
            </div>
        </div>

        <div th:fragment="submit(config, minimalUI)" class="form-group" th:if="${not minimalUI}">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" id="inputFileSubmit" class="btn btn-primary" disabled="true" onclick="uploadFile()" th:text="${config.label.uploadButton}">Upload</button>
                <input type="hidden" id="validationTypeToUse" name="validationType"/>
            </div>
        </div>

    </body>
</html>